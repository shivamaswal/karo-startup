<%- include("partials/header") -%>

<h1>Login</h1>
<form id="reg-form" >
    <input type="text" name="username" id="username" autocomplete="off" placeholder="Enter Username">
    <input type="text" name="password" id="password" autocomplete="off" placeholder="Enter Password">
    <button type="submit">Submit</button>
</form>


</div>
<div class="footer-padding"></div>
  <div class="footer">
    <p>Made with ❤️ by Group 18</p>
  </div>
</div>

<!-- <script src="./js/form.js"></script> -->
<script>
    const form =document.getElementById("reg-form")
    form.addEventListener("submit", loginUser)

    async function loginUser(event){
        event.preventDefault()
        const username = document.getElementById("username").value
        const password = document.getElementById("password").value

        const result = await fetch('/api/login' , {
            method: 'POST',
            headers:{
                'Content-Type' : 'application/json'
            },
            body:JSON.stringify({
                username,
                password
            })
        }).then(res=>res.json());

        if(result.status === 'ok'){
            alert("Sucess")
            window.location="/dashboard";

        } else {
            alert(result.error)
        }



    }
</script>
</body>
</html>
